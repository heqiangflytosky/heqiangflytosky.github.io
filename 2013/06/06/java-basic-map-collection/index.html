<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="String," />





  <link rel="alternate" href="/atom.xml" title="孤舟蓑笠翁，独钓寒江雪" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.0" />






<meta name="description" content="简单介绍集合的使用">
<meta property="og:type" content="article">
<meta property="og:title" content="Java 基础 -- 集合的使用">
<meta property="og:url" content="http://yoursite.com/2013/06/06/java-basic-map-collection/index.html">
<meta property="og:site_name" content="孤舟蓑笠翁，独钓寒江雪">
<meta property="og:description" content="简单介绍集合的使用">
<meta property="og:image" content="http://www.plantuml.com/plantuml/svg/XLF1QXH14BttLmov9r_W8M8EAb6G3Ngkp9RQRE_CsbqRM3Gd8NZqe8W416-Uz21upD_igdzXQgh7ggQpsKEoyrxLgtbLl3bC196My-1EF0LizXx26JH_Bo_MxzzjlbvillnQNrxjETV17DC2Mcn-V_-q-VcnUUtQ02arTsE4LShWNXy2jkJxBhbpAzhy-F3dwktwyxUiuzRv0YAS1Ym9wcCfVGIBQv7l2EFpZ0sQz95mMdAFuSo_uCbCmscY22qrsMw6DvIE_E0SuYexkW_f9VS9UeOmAvbZtyrmMdACo6prO8eTULgDNPa-YOW3vEtkl3auA8pfCnVtzxEJkb2OabyfbDxqBMfFjsr4eINk5awlAqzQiJUkROthsIun89LQKXtAPi3aoaJ1qeOyzebiGD2Y9qjSei57-ChYl72XqLMPtX8dTRAjWsrjgzqoM0nlqx7xZZo4ORg984_Kf2dIM2Zt55lgOmOJWdPcFssUN8ZbLKut7WENg2Bv-ZKfErdQVW3AkvgIz9L7vNzDdc5v2rHMtsttQtYBwp_x3Y67JQHNahHprA0GdOxJmWIpLPF4_qzvL1b8OqU_uniBOnAiN3oC5PQgWp8hzJN7uDGLavpwvDfcyYIZX9O8CYtkJDjmv8frv-uGk-bo7lu1">
<meta property="og:updated_time" content="2019-04-29T08:38:57.975Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java 基础 -- 集合的使用">
<meta name="twitter:description" content="简单介绍集合的使用">
<meta name="twitter:image" content="http://www.plantuml.com/plantuml/svg/XLF1QXH14BttLmov9r_W8M8EAb6G3Ngkp9RQRE_CsbqRM3Gd8NZqe8W416-Uz21upD_igdzXQgh7ggQpsKEoyrxLgtbLl3bC196My-1EF0LizXx26JH_Bo_MxzzjlbvillnQNrxjETV17DC2Mcn-V_-q-VcnUUtQ02arTsE4LShWNXy2jkJxBhbpAzhy-F3dwktwyxUiuzRv0YAS1Ym9wcCfVGIBQv7l2EFpZ0sQz95mMdAFuSo_uCbCmscY22qrsMw6DvIE_E0SuYexkW_f9VS9UeOmAvbZtyrmMdACo6prO8eTULgDNPa-YOW3vEtkl3auA8pfCnVtzxEJkb2OabyfbDxqBMfFjsr4eINk5awlAqzQiJUkROthsIun89LQKXtAPi3aoaJ1qeOyzebiGD2Y9qjSei57-ChYl72XqLMPtX8dTRAjWsrjgzqoM0nlqx7xZZo4ORg984_Kf2dIM2Zt55lgOmOJWdPcFssUN8ZbLKut7WENg2Bv-ZKfErdQVW3AkvgIz9L7vNzDdc5v2rHMtsttQtYBwp_x3Y67JQHNahHprA0GdOxJmWIpLPF4_qzvL1b8OqU_uniBOnAiN3oC5PQgWp8hzJN7uDGLavpwvDfcyYIZX9O8CYtkJDjmv8frv-uGk-bo7lu1">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '6377131610457769000',
      author: '寒江蓑笠'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2013/06/06/java-basic-map-collection/"/>





  <title> Java 基础 -- 集合的使用 | 孤舟蓑笠翁，独钓寒江雪 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  








  <div style="display: none;">
    <script src="//s95.cnzz.com/z_stat.php?id=1261134288&web_id=1261134288" language="JavaScript"></script>
  </div>





  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">孤舟蓑笠翁，独钓寒江雪</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle">程序猿的世界</p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-links">
          <a href="/links" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-users"></i> <br />
            
            友情链接
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2013/06/06/java-basic-map-collection/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="寒江蓑笠">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/icon.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="孤舟蓑笠翁，独钓寒江雪">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="孤舟蓑笠翁，独钓寒江雪" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Java 基础 -- 集合的使用
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2013-06-06T10:00:00+08:00">
                2013-06-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a class="cloud-tie-join-count" href="/2013/06/06/java-basic-map-collection/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count join-count" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2013/06/06/java-basic-map-collection/" class="leancloud_visitors" data-flag-title="Java 基础 -- 集合的使用">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
              <div class="post-description">
                  简单介绍集合的使用
              </div>
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>Java 开发过程中，集合类是我们经常要接触和使用的类，从本文开始，将用一系列的文章来对这个知识点进行梳理和总结。<br>本文先对 Java 集合相关知识做一个概括性的描述，后面会有一系列的文章再细分介绍集合框架。<br>下面先来看一下 Java 集合框架的类图。</p>
<p><img src="http://www.plantuml.com/plantuml/svg/XLF1QXH14BttLmov9r_W8M8EAb6G3Ngkp9RQRE_CsbqRM3Gd8NZqe8W416-Uz21upD_igdzXQgh7ggQpsKEoyrxLgtbLl3bC196My-1EF0LizXx26JH_Bo_MxzzjlbvillnQNrxjETV17DC2Mcn-V_-q-VcnUUtQ02arTsE4LShWNXy2jkJxBhbpAzhy-F3dwktwyxUiuzRv0YAS1Ym9wcCfVGIBQv7l2EFpZ0sQz95mMdAFuSo_uCbCmscY22qrsMw6DvIE_E0SuYexkW_f9VS9UeOmAvbZtyrmMdACo6prO8eTULgDNPa-YOW3vEtkl3auA8pfCnVtzxEJkb2OabyfbDxqBMfFjsr4eINk5awlAqzQiJUkROthsIun89LQKXtAPi3aoaJ1qeOyzebiGD2Y9qjSei57-ChYl72XqLMPtX8dTRAjWsrjgzqoM0nlqx7xZZo4ORg984_Kf2dIM2Zt55lgOmOJWdPcFssUN8ZbLKut7WENg2Bv-ZKfErdQVW3AkvgIz9L7vNzDdc5v2rHMtsttQtYBwp_x3Y67JQHNahHprA0GdOxJmWIpLPF4_qzvL1b8OqU_uniBOnAiN3oC5PQgWp8hzJN7uDGLavpwvDfcyYIZX9O8CYtkJDjmv8frv-uGk-bo7lu1" alt="效果图"></p>
<p>整个集合框架就围绕一组标准接口而设计。你可以直接使用这些接口的标准实现，诸如： <code>LinkedList</code>、<code>HashSet</code>和 <code>TreeSet</code> 等,除此之外你也可以通过这些接口实现自己的集合，比如通过实现 <code>List</code> 接口来实现线程安全的 <code>CopyOnWriteArrayList</code> 类等。<br>上面图中的类都在 java.util.<em> 包下面，本文也只介绍这个包下面的类，其他比如 java.util.concurrent.</em> 包的类将放在另外的文章中介绍。</p>
<h2 id="集合类型"><a href="#集合类型" class="headerlink" title="集合类型"></a>集合类型</h2><p>Java 集合框架的容器类可以主要分为两种外加一种算法类：</p>
<ul>
<li>集合（Collection）：存储一个元素集合。</li>
<li>图（Map）：存储键/值对映射。</li>
<li>算法类：Arrays、Collections。它们实现集合接口的对象里的方法执行的一些有用的计算，例如：搜索和排序。</li>
</ul>
<p>从另外一个维度分，又可以分为：</p>
<ul>
<li>接口：Map、SortedMap、Collection、List、Queue、Set</li>
<li>抽象类：AbstractMap、AbstrCollection、AbstrList等</li>
<li>具体类：HashMap、TreeMap、Vector、ArrayList等</li>
<li>算法类：Arrays、Collections</li>
</ul>
<h2 id="特点介绍"><a href="#特点介绍" class="headerlink" title="特点介绍"></a>特点介绍</h2><p>ArrayList适合于进行大量的随机访问的情况下使用，LinkedList适合在表中进行插入、删除时使用，二者都是非线程安全。</p>
<p>Vector 是线程安全的，它是 ArrayList 的多线程版本。<br>Vector 内部是通过使用 <code>synchronized</code> 方法来保证线程安全的，相对于 <code>CopyOnWriteArrayList</code> 来说性能较低。<br>HashTable 是线程安全的，它是 HashMap 的多线程版本。<code>HashTable</code> 内部是通过使用 <code>synchronized</code> 方法来保证线程安全的，但在线程竞争激烈的情况下它的效率就比较低。这时可以考虑使用 <code>ConcurrentHashMap</code>，这个后面会介绍。<br>HashTable 即不支持 null key也不支持null value。HashMap 中null可以作为key，这样的key只有一个，可以有一个或者多个value所对应的key为null。<br>HashMap 非线程安全，底层主要是基于数组和链表来实现的，它之所以有相当快的查询速度主要是因为它是通过计算散列码来决定存储的位置。适用于在Map中插入、删除和定位元素。</p>
<p>LinkedHashMap 非线程安全，数据元素有有序的，可以按照插入排序和访问排序，是 LruCache 是基于 LinkedHashMap 来实现的。</p>
<p>Colleciton 用于存放多个单对象，Map 用于存放 Key-Value 形式的键值对。</p>
<p>Set 和 List 都继承自 Collection 接口。它们最大的最大区别就是 Set 中的元素不可以重复，List 中允许重复元素。<br>Map中不允许出现重复的键（Key）。</p>
<p>WeakHashMap，直接使用 HashMap 有时候会带来内存溢出的风险，使用 WaekHashMap 实例化 Map。当使用者不再有对象引用的时候，WeakHashMap 将自动被移除对应 Key 值的对象。</p>
<p>TreeMap 非线程安全，底层通过红黑树（Red-Black tree）实现，也就意味着 <code>containsKey()</code>，<code>get()</code>, <code>put()</code>, <code>remove()</code> 都有着 log(n) 的时间复杂度。TreeMap 是自动实现排序的，按照key的字典顺序来排序（升序）或者自定义的 Comparator 接口来排序。在需要使用排序的 Map 时推荐使用 TreeMap。</p>
<p>Deque 是双端队列，你可以从任意一端插入或者抽取元素。</p>
<h2 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h2><ul>
<li>iterator() 是 Collection 接口的方法；listIterator() 是 List 接口的方法；</li>
<li>listIterator 有add()方法，可以向List中添加对象；而 iterator 不能；</li>
<li>listIterator 和 iterator 都有hasNext()和next()方法，可以实现顺序向后遍历；但是 listIterator 有hasPrevious()和previous()方法，可以实现逆向（顺序向前）遍历；iterator 就不可以；</li>
<li>listIterator 可以定位当前的索引位置，nextIndex()和previousIndex()可以实现；iterator 没有此功能；</li>
<li>都可实现删除对象，但是 listIterator 可以实现对象的修改，set()方法可以实现；iterator 仅能遍历，不能修改；</li>
</ul>
<h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="http://www.runoob.com/java/java-collections.html" target="_blank" rel="external">http://www.runoob.com/java/java-collections.html</a><br><a href="http://www.runoob.com/java/java-vector-class.html" target="_blank" rel="external">http://www.runoob.com/java/java-vector-class.html</a></p>
<!-- plantuml 代码 -->
<!--  

@startuml
Title "Java 集合框架图"

namespace 算法 {
class Arrays
class Collections
}

namespace 比较器 {
class Comparable
class Comparator
}

namespace Map {
interface Map
interface SortedMap
interface NavigableMap
abstract class AbstractMap
abstract class Dictionary
class HashMap
class WeakHashMap
class LinkedHashMap
class Hashtable
class IdentityHashMap

class TreeMap

Map <|.. AbstractMap
AbstractMap <|-- HashMap
AbstractMap <|-- WeakHashMap
HashMap <|-- LinkedHashMap
Map <|.. Hashtable
Dictionary  <|-- Hashtable
Map  <|-- SortedMap
SortedMap  <|-- NavigableMap
AbstractMap <|-- TreeMap
NavigableMap <|.. TreeMap
AbstractMap <|-- IdentityHashMap
}

namespace Collection {
interface Collection
interface List
interface Set
interface Queue
interface Deque
interface SortedSet
interface NavigableSet
abstract class AbstractCollection
abstract class AbstractList
abstract class AbstractSet
abstract class AbstractQueue
abstract class AbstractSequentialList

class HashSet
class TreeSet
class LinkedHashSet
class Vector
class Stack
class ArrayList
class LinkedList


Collection <|-- List
Collection <|--  Set
Collection <|--  Queue
Collection <|.. AbstractCollection
AbstractCollection  <|-- AbstractList
List  <|.. AbstractList
AbstractList <|-- AbstractSequentialList
AbstractCollection  <|-- AbstractSet
Set <|.. AbstractSet
Queue <|-- Deque
AbstractCollection  <|-- AbstractQueue
Queue <|.. AbstractQueue
Set <|--  SortedSet
SortedSet  <|--  NavigableSet
AbstractSet <|-- HashSet
AbstractSet <|-- TreeSet
NavigableSet <|.. TreeSet
HashSet <|--  LinkedHashSet
AbstractList <|--  Vector
AbstractList <|--  ArrayList
AbstractSequentialList <|-- LinkedList
Vector <|-- Stack
List <|.. LinkedList
Deque <|.. LinkedList

}
@enduml

-->

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/String/" rel="tag"># String</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2013/06/08/java-basic-arrays-collections/" rel="prev" title="Java 基础 -- 算法类 Arrays 和 Collections">
                Java 基础 -- 算法类 Arrays 和 Collections <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/icon.png"
               alt="寒江蓑笠" />
          <p class="site-author-name" itemprop="name">寒江蓑笠</p>
          <p class="site-description motion-element" itemprop="description">技术博客</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">200</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">30</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">102</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/heqiangflytosky/" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.csdn.net/heqiangflytosky/" target="_blank" title="CSDN">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  CSDN
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#概述"><span class="nav-number">1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#集合类型"><span class="nav-number">2.</span> <span class="nav-text">集合类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#特点介绍"><span class="nav-number">3.</span> <span class="nav-text">特点介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#迭代器"><span class="nav-number">4.</span> <span class="nav-text">迭代器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考文章"><span class="nav-number">5.</span> <span class="nav-text">参考文章</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">寒江蓑笠</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  
    
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "d2475abece3649debc94c21b166fc009",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
  






  
  

  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("6zbrLyUbhXLbd7RqUSMnxhg4-gzGzoHsz", "fb9g4GyEWQysqnpY9t5CPhpU");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  


</body>
</html>
